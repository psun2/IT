# redux-saga(middleware)

: redux-thunk ë‹¤ìŒìœ¼ë¡œ ê°€ì¥ ë§ì´ ì‚¬ìš© ë˜ëŠ” ë¹„ë™ê¸° ì‘ì—… ê´€ë ¨ middleware ì…ë‹ˆë‹¤.

: redux-thunk: í•¨ìˆ˜ë¥¼ dispatch í•˜ëŠ” middleware

: redux-saga: ì•¡ì…˜ì„ ëª¨ë‹ˆí„°ë§ í•˜ê³  ìˆë‹¤ê°€, íŠ¹ì • ì•¡ì…˜ì´ ë°œìƒí•˜ë©´ ì´ì— ë”°ë¼ íŠ¹ì • ì‘ì—…ì„ í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©ì„ í•©ë‹ˆë‹¤.  
=> íŠ¹ì • ì‘ì—…ì´ë€, íŠ¹ì • javascript ë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒ ì¼ ìˆ˜ë„ ìˆê³ , ë‹¤ë¥¸ actionì„ dispatch í•˜ëŠ” ê²ƒ ì¼ìˆ˜ë„ ìˆê³ , í˜„ì¬ ìƒíƒœë¥¼ ì¡°íšŒí•˜ëŠ” ê²ƒ ì¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

redux-saga ì˜ ì¥ì :

1. ë¹„ë™ê¸° ì‘ì—…ì„ ì§„í–‰ í•  ë•Œ ê¸°ì¡´ ìš”ì²­ì„ ì·¨ì†Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
2. íŠ¹ì • ì•¡ì…˜ì´ ë°œìƒ í–ˆì„ ë•Œ ì´ì— ë”°ë¼ ë‹¤ë¥¸ ì•¡ì…˜ì„ ë””ìŠ¤íŒ¨ì¹˜ í•˜ê±°ë‚˜, ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œë¥¼ ì‹¤í–‰ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
3. ì›¹ì†Œì¼“ì„ ì‚¬ìš©í•˜ëŠ”ê²½ìš° Channel ì´ë¼ëŠ” ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ ë”ìš± íš¨ìœ¨ì ìœ¼ë¡œ ì½”ë“œë¥¼ ê´€ë¦¬ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
4. ë¹„ë™ê¸° ì‘ì—…ì´ ì‹¤íŒ¨í–ˆì„ ë•Œ ì¬ì‹œë„ í•˜ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
5. redux-saga ëŠ” javascript ì˜ Generator ë¬¸ë²•ì„ ì‚¬ìš© í•©ë‹ˆë‹¤.

ğŸ’Œ `Generator` ë¬¸ë²•ì´ë€ ?  
í•¨ìˆ˜ì˜ íë¦„ì„ íŠ¹ì • êµ¬ê°„ì— ë©ˆì¶°ë†“ì•˜ë‹¤ê°€ ë‹¤ì‹œ ì‹¤í•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
ê²°ê³¼ê°’ì„ ì—¬ëŸ¬ë²ˆ ë‚´ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ex - ì¼ë°˜ í•¨ìˆ˜ì˜ ê²½ìš°

```
function weirdFunction() {
    return 1;
    return 2;
    return 3;
    return 4;
    return 5;
}
// weirdFunction í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ë©´ ë¬´ì¡°ê±´ 1ë§Œ ë°˜í™˜ ë©ë‹ˆë‹¤.
```

ex - Generator í•¨ìˆ˜ì˜ ê²½ìš°

```
function* GeneratorFunction() {
    console.log('ì•ˆë…•í•˜ì„¸ìš”?');
    yield 1;
    // yieldë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì—¬ëŸ¬ë²ˆ ë°˜í™˜(return ê³¼ëŠ” ë‹¤ë¥¸ ë°˜í™˜) í• ìˆ˜ë„ ìˆê³ , yield ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•¨ìˆ˜ì˜ íë¦„ì„ ë©ˆì¶œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    console.log('ì œë„ˆë ˆì´í„° í•¨ìˆ˜');
    yield 2;
    console.log('function*');
    yield 3;
    return 4;
}
const generator = GeneratorFunction();
generator.next();
// ì•ˆë…•í•˜ì„¸ìš”?
// {value: 1, done: false}
// generator.next();
// VM10:5 ì œë„ˆë ˆì´í„° í•¨ìˆ˜
// {value: 2, done: false}
// generator.next();
// VM10:7 function*
// {value: 3, done: false}
// generator.next();
// {value: 4, done: true}
// generator.next();
// {value: undefined, done: true}
```

í•¨ìˆ˜ì˜ íë¦„ì„ íŠ¹ì • êµ¬ê°„ì— ë©ˆì¶”ì–´ ë†“ì•˜ë‹¤ê°€(yield) ë‹¤ì‹œ ì‹¤í–‰(next()) í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
ê²°ê³¼ê°’ì„ ì—¬ëŸ¬ë²ˆ ë‚´ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ex - ë³€ìˆ˜ ê°’ì„ ë°›ëŠ” Generator í•¨ìˆ˜2

```
function* sumGenerator() {
  console.log("sumGeneratorê°€ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤!");
  let a = yield;
  console.log("aê°’ì„ ë°›ì•˜ìŠµë‹ˆë‹¤.");
  let b = yield;
  console.log("bê°’ì„ ë°›ì•˜ìŠµë‹ˆë‹¤.");
  return a + b;
}

const sum = sumGenerator();

sum.next();
// sumGeneratorê°€ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤!
// {value: undefined, done: false}
sum.next(2);
// aê°’ì„ ë°›ì•˜ìŠµë‹ˆë‹¤.
// {value: undefined, done: false}
sum.next(5);
// bê°’ì„ ë°›ì•˜ìŠµë‹ˆë‹¤.
// {value: 7, done: true}
```

ex - ë¬´í•œë°˜ë³µì˜ Generator í•¨ìˆ˜3

```
function* infiniteAddGenerator() {
  // infiniteAddGenerator ê°€ ì‹œì‘ë˜ë©´
  let result = 0;
  while (true) {
    // while ë¬¸ì´ ì‹œì‘ë˜ê³ ,
    result += yield result;
    // result ì— next ë¡œ ë°›ì•„ì˜¨ ê°’ì„ ë”í•´ì£¼ê³ 
    // ê·¸ ê²°ê³¼ ê°’ìœ¼ë¡œëŠ” result ì£¼ê² ë‹¤ ë¼ëŠ” ì˜ë¯¸ì˜ í•¨ìˆ˜ ì…ë‹ˆë‹¤.
  }
}
const add = infiniteAddGenerator();
add.next(); // next ë¥¼ í•œ ë²ˆ í•´ì¤Œìœ¼ë¡œì¨, infiniteAddGenerator í•¨ìˆ˜ ì‹¤í–‰
// {value: 0, done: false}
add.next(10);
// {value: 10, done: false}
add.next(20);
// {value: 30, done: false}
add.next(25);
// {value: 55, done: false}
add.next(100);
// {value: 155, done: false}
```

ğŸ’¥ redux-sagaëŠ” Generatorì— ê¸°ë°˜í•œ ë¯¸ë“¤ì›¨ì–´ ì…ë‹ˆë‹¤.
